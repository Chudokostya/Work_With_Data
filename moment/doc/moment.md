# Вступ
___
# Що таке і для чого використовується moment.js?

  Moment.js - це одна з найпопулярніших JavaScript-бібліотек для розбору і форматування дат. 
У компанії WhereTo використовують Node.js, тому для них застосування цієї бібліотеки було абсолютно природним ходом. 
Проблем з серверним використанням Moment.js не очікувалося. Зрештою, вони з самого початку використовували цю бібліотеку у фронтенді для виведення дат і були задоволені її роботою.
Однак те, що бібліотека добре показала себе на клієнті, ще не означало, що і на сервері з нею проблем не буде.
MomentJS - це бібліотека JavaScript, яка допомагає аналізувати, перевіряти, маніпулювати і відображати дату і час в JavaScript дуже простим способом. У цьому розділі буде представлений огляд MomentJS і детально розглянуті його можливості.

Moment JS дозволяє відображати дату відповідно до локалізації і в легкому для читання форматі. Ви можете використовувати MomentJS всередині браузера, використовуючи метод script. Він також доступний з Node.js і може бути встановлений за допомогою npm.

У MomentJS ви можете знайти безліч простих у використанні методів для додавання, віднімання, перевірки дати, отримання максимальної, мінімальної дати і т. Д. Це проект з відкритим вихідним кодом, і ви можете легко робити внесок в бібліотеку і додавати функції у вигляді плагінів і зробити його доступним на GitHub і в Node.js.

# Установка
___
Будемо вважати, що Node.js уже встановлена на комп'ютері. 
В терміналі введемо команду ініціалізації:

```bash
    npm install moment
```
Після успішної установки MomentJS ви можете спостерігати наступний вивід:
![Screenshot_1](https://github.com/Chudokostya/Work_With_Data/blob/main/moment/imgs/1.jpg)

Тепер, щоб перевірити, чи добре працює MomentJS з Node.js, створіть файл test.js і додайте в нього наступний код:
```bash
var moment = require ('moment');
var a = moment (). toString ();
console.log (a);
```
Тепер в командному рядку запустіть командний вузол test.js, як показано на наведеному нижче знімку екрану:
![Screenshot_2](https://github.com/Chudokostya/Work_With_Data/blob/main/moment/imgs/2.jpg)

# Парсинг дати і часу

MomentJS має багато простих у використанні методів, які допомагають в розборі дати і часу. Він може аналізувати дати у вигляді об'єкта, рядки, масиву, власного об'єкта дати в JavaScript і т. Д. У цьому розділі вони детально обговорюються.

Дата розбору
MomentJS видає об'єкт-оболонку в якості висновку при виклику moment (). Коли ви втішає висновок в браузері, ви можете спостерігати наступне.

![Screenshot_3](https://github.com/Chudokostya/Work_With_Data/blob/main/moment/imgs/3.jpg)

# Перевірка дати

MomentJS виконує перевірку дати простим способом. Вам не потрібно писати багато коду для перевірки дати. isValid () - це метод, доступний в даний момент, який повідомляє, чи є дата дійсної чи ні. MomentJS також надає безліч прапорів розбору, які можна використовувати для перевірки правильності дати.

Розбір прапорів
MomentJS надає наступні прапори синтаксичного аналізу у випадках, коли зазначена дата вважається недійсною -

переповнення - це станеться, коли вказаний місяць буде 13-м, день - 367-м на рік або 32-м в місяці, 29-е - в лютому для невисокосному року і т. д. Переповнення містить індекс неприпустимою одиниці для зіставлення з invalidAt. Зверніть увагу, що -1 означає відсутність переповнення.

invalidMonth - показує невірне назва місяця. Це дасть неприпустиму рядок місяці або нуль.

Пусто - коли заданий введення, який не є датою. Це дає логічне значення.

nullInput - нульовий введення, наприклад момент (нуль); повертає логічне значення.

invalidFormat - Коли вказаний формат порожній, наприклад момент ( '2018-04-25', []). Повертає логічне значення.

userInvalidated - дата, явно створена як недійсна, наприклад, moment.invalid (). Повертає логічне значення.

Меріда - вказує на проаналізований Меріда (AM / PM), якщо такий є. Повертає рядок.

parsedDateParts - повертає масив проаналізованих частин дати, таких як parsedDateParts [0] як рік, parsedDateParts [1] як місяць і parsedDateParts [2] як день. Якщо немає частин, але Меріда має значення, дата недійсна. Повертає масив.

Розглянемо наступний приклад, щоб зрозуміти дату перевірки -
```bash 
var a = moment("2018-18-10T10:20:25");
a.isValid();
a.invalidAt();
```

![Screenshot_4](https://github.com/Chudokostya/Work_With_Data/blob/main/moment/imgs/4.jpg)

# Модулі

Модулі - це розширені функції, додані в MomentJS. MomentJS - це проект з відкритим вихідним кодом, і в MomentJS можна знайти безліч плагінів, наданих його користувачами і доступних з використанням Node.js і GitHub.

У цьому розділі обговорюються деякі плагіни календарів і плагіни форматів дати, доступні в MomentJS.

Модулі календаря
У цьому розділі розглядаються два типи плагінів Календаря: календар ISO і тайванський календар.

Календар ІСО
Ви можете використати таку команду, щоб встановити його з Node.js -
```bash 
npm install moment-isocalendar
```

Ви можете отримати moment-isocalendar.js з GitHub - https://github.com/fusionbox/moment-isocalendar. Зверніть увагу на наступний робочий приклад з isocalendar і MomentJS -

Приклад:
```bash 
var m = moment().isocalendar();
```
Вивід:
![Screenshot_5](https://github.com/Chudokostya/Work_With_Data/blob/main/moment/imgs/5.jpg)
Приклад:
```bash 
var m = moment.fromIsocalendar([2018, 51, 10, 670]).format('LLLL');
```
Вивід:
![Screenshot_6](https://github.com/Chudokostya/Work_With_Data/blob/main/moment/imgs/6.jpg)


# Зростання проекту і падіння продуктивності

  Нещодавно число записів про літакових рейсах, які повертає система WhereTo, зросла приблизно в десять разів. Тоді ми зіткнулися з дуже сильним падінням продуктивності. 
Виявилося, що цикл рендеринга, який займав менше 100 мілісекунд, тепер, для виведення близько 5000 результатів пошуку, виконується більше 3 секунд. Наша команда зайнялася дослідженнями.
Після кількох сеансів профілювання ми помітили, що більше 99% цього часу витрачається в єдиній функції, яка називається createInZone.
